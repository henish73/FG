<?php\nheader('Content-Type: application/json');\n\n// --- IMPORTANT: REPLACE WITH YOUR ACTUAL DATABASE CREDENTIALS ---\n\$db_host = 'localhost'; \n\$db_name = 'u637147602_frenchgta_data'; // From your screenshot OR your actual DB name\n\$db_user = 'YOUR_DATABASE_USERNAME';    \n\$db_pass = 'YOUR_DATABASE_PASSWORD';    \n// ----------------------------------------------------------------\n\n\$response = ['status' => 'error', 'message' => 'An unexpected error occurred.'];\n\nif ($_SERVER["REQUEST_METHOD"] == "POST") {\n    // Get and sanitize input data from FormData object\n    \$firstName = isset($_POST['firstName']) ? trim($_POST['firstName']) : '';\n    \$lastName = isset($_POST['lastName']) ? trim($_POST['lastName']) : '';\n    \$email = isset($_POST['email']) ? trim($_POST['email']) : '';\n    \$frenchLevel = isset($_POST['frenchLevel']) ? trim($_POST['frenchLevel']) : '';\n    \$notes = isset($_POST['notes']) ? trim($_POST['notes']) : null; // Optional\n    \$bookingDate = isset($_POST['date']) ? trim($_POST['date']) : ''; // 'date' is from bookingData object key\n    \$bookingTime = isset($_POST['time']) ? trim($_POST['time']) : ''; // 'time' is from bookingData object key\n    \$googleMeetLink = isset($_POST['googleMeetLink']) ? trim($_POST['googleMeetLink']) : null; // Sent from JS\n\n    // Basic validation\n    if (empty(\$firstName) || empty(\$lastName)) {\n        \$response['message'] = 'First and last name are required.';\n        echo json_encode(\$response);\n        exit;\n    }\n    if (empty(\$email) || !filter_var(\$email, FILTER_VALIDATE_EMAIL)) {\n        \$response['message'] = 'A valid email is required.';\n        echo json_encode(\$response);\n        exit;\n    }\n    if (empty(\$frenchLevel)) {\n        \$response['message'] = 'French level selection is required.';\n        echo json_encode(\$response);\n        exit;\n    }\n    if (empty(\$bookingDate) || !preg_match("/^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/", \$bookingDate)) {\n        \$response['message'] = 'A valid booking date (YYYY-MM-DD) is required.';\n        echo json_encode(\$response);\n        exit;\n    }\n    if (empty(\$bookingTime) || !preg_match("/^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/", \$bookingTime)) {\n        \$response['message'] = 'A valid booking time (HH:MM) is required.';\n        echo json_encode(\$response);\n        exit;\n    }\n\n    // Create connection\n    \$conn = new mysqli(\$db_host, \$db_user, \$db_pass, \$db_name);\n\n    if (\$conn->connect_error) {\n        error_log("Connection failed: " . \$conn->connect_error);\n        \$response['message'] = 'Could not connect to the database.';\n        echo json_encode(\$response);\n        exit;\n    }\n    if (!\$conn->set_charset("utf8mb4")) {\n        error_log("Error loading character set utf8mb4: " . \$conn->error);\n    }\n\n    \$stmt = \$conn->prepare("INSERT INTO demo_bookings (first_name, last_name, email, french_level, notes, booking_date, booking_time, google_meet_link) VALUES (?, ?, ?, ?, ?, ?, ?, ?)");\n    \n    if (\$stmt === false) {\n        error_log("MySQLi prepare failed: " . \$conn->error . " SQL: INSERT INTO demo_bookings ...");\n        \$response['message'] = 'Error preparing database statement.';\n        echo json_encode(\$response);\n        \$conn->close();\n        exit;\n    }\n    \n    \$stmt->bind_param("ssssssss", \$firstName, \$lastName, \$email, \$frenchLevel, \$notes, \$bookingDate, \$bookingTime, \$googleMeetLink);\n\n    if (\$stmt->execute()) {\n        \$response['status'] = 'success';\n        \$response['message'] = 'Thank you! Your demo class booking has been successfully submitted to our database.';\n    } else {\n        error_log("MySQLi execute failed: " . \$stmt->error);\n        \$response['message'] = 'Error saving your booking. Please try again.';\n    }\n\n    \$stmt->close();\n    \$conn->close();\n\n} else {\n    \$response['message'] = 'Invalid request method.';\n}\n\necho json_encode(\$response);\n?> 