<?php\nheader('Content-Type: application/json');\n\n// --- IMPORTANT: REPLACE WITH YOUR ACTUAL DATABASE CREDENTIALS ---\n\$db_host = 'localhost'; \n\$db_name = 'u637147602_frenchgta_data'; // From your screenshot OR your actual DB name\n\$db_user = 'YOUR_DATABASE_USERNAME';    \n\$db_pass = 'YOUR_DATABASE_PASSWORD';    \n// ----------------------------------------------------------------\n\n\$response = ['status' => 'error', 'message' => 'An unexpected error occurred.'];\n\nif ($_SERVER["REQUEST_METHOD"] == "POST") {\n    // Get and sanitize input data from FormData object\n    \$name = isset($_POST['name']) ? trim($_POST['name']) : ''; // 'name' is from #modal-name\n    \$email = isset($_POST['email']) ? trim($_POST['email']) : ''; // 'email' is from #modal-email\n    \$whatsapp_url_triggered = isset($_POST['whatsappUrl']) ? trim($_POST['whatsappUrl']) : null; // Sent from JS\n\n    // Basic validation\n    if (empty(\$name)) {\n        \$response['message'] = 'Name is required.';\n        echo json_encode(\$response);\n        exit;\n    }\n    if (empty(\$email) || !filter_var(\$email, FILTER_VALIDATE_EMAIL)) {\n        \$response['message'] = 'A valid email is required.';\n        echo json_encode(\$response);\n        exit;\n    }\n\n    // Create connection\n    \$conn = new mysqli(\$db_host, \$db_user, \$db_pass, \$db_name);\n\n    if (\$conn->connect_error) {\n        error_log("Connection failed: " . \$conn->connect_error);\n        \$response['message'] = 'Could not connect to the database.';\n        echo json_encode(\$response);\n        exit;\n    }\n    if (!\$conn->set_charset("utf8mb4")) {\n        error_log("Error loading character set utf8mb4: " . \$conn->error);\n    }\n\n    \$stmt = \$conn->prepare("INSERT INTO popup_inquiries (name, email, whatsapp_url_triggered) VALUES (?, ?, ?)");\n    \n    if (\$stmt === false) {\n        error_log("MySQLi prepare failed: " . \$conn->error . " SQL: INSERT INTO popup_inquiries ...");\n        \$response['message'] = 'Error preparing database statement.';\n        echo json_encode(\$response);\n        \$conn->close();\n        exit;\n    }\n    \n    \$stmt->bind_param("sss", \$name, \$email, \$whatsapp_url_triggered);\n\n    if (\$stmt->execute()) {\n        \$response['status'] = 'success';\n        \$response['message'] = 'Thank you! Your quick inquiry has been submitted to our database.';\n    } else {\n        error_log("MySQLi execute failed: " . \$stmt->error);\n        \$response['message'] = 'Error saving your inquiry. Please try again.';\n    }\n\n    \$stmt->close();\n    \$conn->close();\n\n} else {\n    \$response['message'] = 'Invalid request method.';\n}\n\necho json_encode(\$response);\n?> 