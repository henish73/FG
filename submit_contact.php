<?php\nheader('Content-Type: application/json');\n\n// --- IMPORTANT: REPLACE WITH YOUR ACTUAL DATABASE CREDENTIALS ---\n\$db_host = 'localhost'; // Usually 'localhost' on Hostinger\n\$db_name = 'u637147602_frenchgta_data'; // From your screenshot\n\$db_user = 'YOUR_DATABASE_USERNAME';    // The user you created for this database\n\$db_pass = 'YOUR_DATABASE_PASSWORD';    // The password for that user\n// ----------------------------------------------------------------\n\n\$response = ['status' => 'error', 'message' => 'An unexpected error occurred.'];\n\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n    // Get and sanitize input data\n    \$name = isset($_POST['name']) ? trim($_POST['name']) : '';\n    \$email = isset($_POST['email']) ? trim($_POST['email']) : '';\n    \$phone = isset($_POST['phone']) ? trim($_POST['phone']) : null; // Optional\n    \$subject_text = isset($_POST['subject']) ? trim($_POST['subject']) : null; // Optional, matches form field name\n    \$level_selected = isset($_POST['level']) ? trim($_POST['level']) : null; // Optional, matches form field name\n    \$message_text = isset($_POST['message']) ? trim($_POST['message']) : '';\n\n    // Basic validation\n    if (empty(\$name)) {\n        \$response['message'] = 'Name is required.';\n        echo json_encode(\$response);\n        exit;\n    }\n    if (empty(\$email) || !filter_var(\$email, FILTER_VALIDATE_EMAIL)) {\n        \$response['message'] = 'A valid email is required.';\n        echo json_encode(\$response);\n        exit;\n    }\n    if (empty(\$message_text)) {\n        \$response['message'] = 'Message is required.';\n        echo json_encode(\$response);\n        exit;\n    }\n\n    // Create connection\n    \$conn = new mysqli(\$db_host, \$db_user, \$db_pass, \$db_name);\n\n    // Check connection\n    if (\$conn->connect_error) {\n        // Log error to server logs instead of exposing to client for security\n        error_log(\"Connection failed: \" . \$conn->connect_error);\n        \$response['message'] = 'Could not connect to the database. Please try again later.';\n        echo json_encode(\$response);\n        exit;\n    }\n\n    // Prepare and bind\n    \$stmt = \$conn->prepare(\"INSERT INTO contact_submissions (name, email, phone, subject_text, level_selected, message_text) VALUES (?, ?, ?, ?, ?, ?)\");\n    \n    if (\$stmt === false) {\n        error_log(\"MySQLi prepare failed: \" . \$conn->error);\n        \$response['message'] = 'Error preparing database statement.';\n        echo json_encode(\$response);\n        \$conn->close();\n        exit;\n    }\n    \n    // The 's' character in bind_param means the parameter is a string.\n    // s = string, i = integer, d = double, b = blob\n    \$stmt->bind_param(\"ssssss\", \$name, \$email, \$phone, \$subject_text, \$level_selected, \$message_text);\n\n    // Execute the statement\n    if (\$stmt->execute()) {\n        \$response['status'] = 'success';\n        \$response['message'] = 'Thank you! Your inquiry has been successfully submitted to our database.';\n    } else {\n        error_log(\"MySQLi execute failed: \" . \$stmt->error);\n        \$response['message'] = 'There was an error saving your inquiry. Please try again. ' . \$stmt->error; // Keep detailed error for server log, simpler for client\n        // For production, you might want a more generic client message: \$response['message'] = 'There was an error saving your inquiry. Please try again.';\n    }\n\n    \$stmt->close();\n    \$conn->close();\n\n} else {\n    \$response['message'] = 'Invalid request method.';\n}\n\necho json_encode(\$response);\n?> 